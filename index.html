<!doctype html>
<html lang="it" dir="ltr" data-theme="dark" data-language="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <title>Opera Viva | Fotografia di mare, navi ed equipaggi</title>

  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <meta name="description" content="Opera Viva è un progetto fotografico su mare, navi ed equipaggi: collodio umido, infrarosso e pellicola per raccontare rotte, porti e persone come un’epopea contemporanea.">
  <meta name="robots" content="index,follow,max-image-preview:large">
  <meta name="color-scheme" content="dark light">
  <meta name="theme-color" content="#212121">
  <meta name="format-detection" content="telephone=no">

  <!-- TODO: aggiorna con il dominio reale -->
  <link rel="canonical" href="https://operaviva.it/">

  <meta property="og:locale" content="it_IT">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Opera Viva">
  <meta property="og:title" content="Opera Viva | Fotografia di mare, navi ed equipaggi">
  <meta property="og:description" content="Collodio umido, infrarosso e pellicola per trasformare imbarcazioni e volti in opere senza tempo. Mostra itinerante in Italia.">
  <!-- TODO: aggiorna con il dominio reale -->
  <meta property="og:url" content="https://operaviva.it/">
  <!-- TODO: crea una cover 1200x630 e aggiorna -->
  <meta property="og:image" content="https://operaviva.it/img/og-cover.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Opera Viva">
  <meta name="twitter:card" content="summary_large_image">

  <!-- TODO: aggiorna con il dominio reale -->
  <link rel="alternate" hreflang="it" href="https://operaviva.it/">
  <link rel="alternate" hreflang="en" href="https://operaviva.it/?lang=en">
  <link rel="alternate" hreflang="x-default" href="https://operaviva.it/">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300..900&family=Inter:wght@200..900&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" referrerpolicy="no-referrer">

  <!-- Lightbox (CDN, niente download) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">

  <style>
    :root{ color-scheme: dark light; }
    html, body{ overflow-x:hidden; }
    body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a{ color:inherit; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .skip-link{ position:absolute; left:-9999px; top:0; padding:.75rem 1rem; background:#111; border:1px solid #333; border-radius:.75rem; z-index:9999; }
    .skip-link:focus{ left:.75rem; top:.75rem; }
  </style>

  <style>
    :root{
      --font-body: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --font-display: Fraunces, ui-serif, Georgia, serif;

      --fs-0: clamp(0.94rem, 0.88rem + 0.22vw, 1.02rem);
      --fs-1: clamp(1.08rem, 0.96rem + 0.55vw, 1.28rem);
      --fs-2: clamp(1.42rem, 1.10rem + 1.25vw, 2.00rem);
      --fs-3: clamp(1.95rem, 1.35rem + 2.25vw, 2.95rem);
      --fs-4: clamp(2.60rem, 1.70rem + 3.10vw, 3.90rem);

      --s-1: clamp(0.55rem, 0.44rem + 0.32vw, 0.72rem);
      --s-2: clamp(0.88rem, 0.70rem + 0.55vw, 1.18rem);
      --s-3: clamp(1.20rem, 0.95rem + 0.85vw, 1.70rem);
      --s-4: clamp(1.58rem, 1.15rem + 1.30vw, 2.25rem);
      --s-5: clamp(2.20rem, 1.45rem + 2.15vw, 3.30rem);
      --s-6: clamp(3.10rem, 2.00rem + 3.20vw, 5.10rem);

      --r-1: 12px;
      --r-2: 18px;
      --r-3: 28px;

      --ease-out: cubic-bezier(.16,1,.3,1);
      --ease-soft: cubic-bezier(.2,.8,.2,1);
      --dur-1: 180ms;
      --dur-2: 320ms;
      --dur-3: 720ms;

      --wrap: min(1120px, calc(100% - 2*clamp(1rem, 4vw, 2.2rem)));

      --accent: rgba(232,223,214,.92);
      --accent-soft: rgba(232,223,214,.14);
      --ph-breath: 2.6s;
    }

    :root[data-theme="dark"]{
      --bg: #212121;
      --bg-2: #1c1c1c;
      --bg-3: #242424;

      --surface: rgba(255,255,255,.035);
      --surface-2: rgba(255,255,255,.055);
      --surface-3: rgba(255,255,255,.075);

      --border: rgba(255,255,255,.10);
      --border-2: rgba(255,255,255,.16);

      --text: rgba(245,245,245,.93);
      --muted: rgba(216,216,216,.70);
      --muted-2: rgba(216,216,216,.54);

      --shadow: rgba(0,0,0,.60);
      --ph-1: rgba(255,255,255,.045);
      --ph-2: rgba(255,255,255,.095);
      --ok: #42d17a;
    }

    :root[data-theme="light"]{
      --bg: #ffffff;
      --bg-2: #f6f6f6;
      --bg-3: #efefef;

      --surface: rgba(0,0,0,.03);
      --surface-2: rgba(0,0,0,.055);
      --surface-3: rgba(0,0,0,.085);

      --border: rgba(0,0,0,.10);
      --border-2: rgba(0,0,0,.16);

      --text: rgba(0,0,0,.90);
      --muted: rgba(0,0,0,.67);
      --muted-2: rgba(0,0,0,.52);

      --shadow: rgba(0,0,0,.18);
      --ph-1: rgba(0,0,0,.035);
      --ph-2: rgba(0,0,0,.085);
      --ok: #1aa957;

      --accent: rgba(30,30,30,.92);
      --accent-soft: rgba(30,30,30,.10);
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: var(--font-body);
      font-size: var(--fs-0);
      line-height: 1.58;
      letter-spacing: .015em;
      color: var(--text);
      background: linear-gradient(180deg, var(--bg), var(--bg));
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      overflow-x: hidden;
    }

    img, video, iframe{ max-width:100%; display:block; }
    a{ color: inherit; text-decoration: none; }
    button{ font-family: inherit; color: inherit; }
    .wrap{ width: var(--wrap); margin-inline:auto; }
    .bleed{ width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }

    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events:none;
      opacity: .06;
      mix-blend-mode: overlay;
      background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,.14) 1px, transparent 0);
      background-size: 3px 3px;
    }

    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      *, *::before, *::after{ animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; }
    }

    :root[data-language="it"] [lang="en"]{ display:none !important; }
    :root[data-language="en"] [lang="it"]{ display:none !important; }

    .kicker{
      margin: 0 0 var(--s-2);
      color: var(--muted-2);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .82em;
    }
    .h2{
      font-family: var(--font-display);
      font-size: var(--fs-3);
      line-height: 1.08;
      letter-spacing: .03em;
      margin: 0 0 var(--s-2);
    }
    .lead{ font-size: var(--fs-1); color: var(--muted); margin: 0 0 var(--s-3); max-width: 70ch; }
    .p{ margin: 0 0 var(--s-2); color: var(--muted); max-width: 78ch; }
    .micro{ font-size: .90em; color: var(--muted-2); margin: 0; letter-spacing: .08em; text-transform: uppercase; }

    .emph{ color: var(--accent); font-weight: 900; }
    :focus-visible{ outline: 2px solid color-mix(in oklab, var(--text) 55%, transparent); outline-offset: 3px; }

    .site-header{
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 70;
      background: transparent;
      pointer-events: auto;
    }

    .header__wrap{
      display:flex;
      align-items:center;
      justify-content: flex-end;
      padding: .90rem 0;
      position: relative;
    }

    .headerPill{
      display:inline-flex;
      align-items:center;
      gap: .65rem;
      position: relative;
      border-radius: 22px;
      padding: 0;
      background: transparent;
      border: 1px solid transparent;
      backdrop-filter: none;
      transition: background var(--dur-2) var(--ease-out), border-color var(--dur-2) var(--ease-out), backdrop-filter var(--dur-2) var(--ease-out), box-shadow var(--dur-2) var(--ease-out), padding var(--dur-2) var(--ease-out);
    }

    .site-header.is-scrolled .headerPill{
      padding: .35rem;
      backdrop-filter: blur(14px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-color: color-mix(in oklab, var(--border) 85%, transparent);
      box-shadow: 0 22px 110px var(--shadow);
    }

    .site-header.is-over-hero .icon-btn,
    .site-header.is-over-hero .chip-btn{
      color: rgba(255,255,255,.93);
      border-color: rgba(255,255,255,.20);
      background: rgba(0,0,0,.18);
    }

    .site-header.is-over-hero.is-scrolled .headerPill{
      background: rgba(0,0,0,.32);
      border-color: rgba(255,255,255,.18);
    }

    .icon-btn{
      appearance:none;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      color: var(--text);
      width: 42px;
      height: 42px;
      border-radius: 16px;
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      box-shadow: 0 18px 80px var(--shadow);
    }
    .icon-btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .icon-btn:active{ transform: translateY(0); }
    .icon-btn.is-active{ border-color: color-mix(in oklab, var(--accent) 70%, transparent); }

    .chip-btn{
      appearance:none;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      color: var(--text);
      height: 42px;
      padding: 0 .75rem;
      border-radius: 16px;
      display:inline-flex;
      align-items:center;
      gap: .55rem;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      box-shadow: 0 18px 80px var(--shadow);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-weight: 950;
      font-size: .78em;
      line-height: 1;
      white-space: nowrap;
    }
    .chip-btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .chip-btn:active{ transform: translateY(0); }
    .chip-label{ opacity: .95; }

    @media (max-width: 520px){
      .icon-btn{ width:40px; height:40px; }
      .chip-btn{ height:40px; }
    }

    .popMenu{
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      display:flex;
      align-items:center;
      gap: .55rem;
      padding: .55rem;
      border-radius: 18px;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      backdrop-filter: blur(14px);
      box-shadow: 0 26px 120px var(--shadow);
      transform-origin: top right;
      transform: translateY(-6px) scale(.98);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--dur-2) var(--ease-out), transform var(--dur-2) var(--ease-out);
    }
    .popMenu.is-open{
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
    }

    .section{ padding: var(--s-6) 0; }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.55rem;
      padding: .95rem 1.25rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 900;
      letter-spacing: .14em;
      text-transform: uppercase;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      font-size: .86em;
      line-height: 1;
      white-space: nowrap;
      color: var(--text);
      background: transparent;
    }
    .btn--primary{ background: color-mix(in oklab, var(--surface-2) 85%, transparent); }
    .btn--ghost{ background: transparent; }
    .btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .btn:active{ transform: translateY(0); }
    .btn i{ opacity: .9; font-size: 1em; }

    .viewShell{
      position: relative;
      min-height: 60vh;
      will-change: opacity, transform, filter;
    }
    .viewShell.is-swapping{ pointer-events: none; }
    .viewShell.is-leaving{
      opacity: 0;
      transform: translateY(10px);
      filter: blur(2px);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }
    .viewShell.is-entering{
      opacity: 0;
      transform: translateY(10px);
      filter: blur(2px);
    }
    .viewShell.is-entered{
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }

    .hero{
      position: relative;
      padding: clamp(7.5rem, 12vh, 10.5rem) 0 var(--s-6);
      overflow: hidden;
      color: rgba(255,255,255,.93);
    }
    .hero .kicker{ color: rgba(255,255,255,.70); }
    .hero .hero__sub{ color: rgba(255,255,255,.76); }
    .hero .btn{
      color: rgba(255,255,255,.92);
      border-color: rgba(255,255,255,.20);
      background: rgba(0,0,0,.16);
    }
    .hero .btn--primary{ background: rgba(255,255,255,.10); }
    .hero .btn:hover{ border-color: rgba(255,255,255,.32); }

    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(120% 120% at 20% 0%, rgba(0,0,0,.10), rgba(0,0,0,.72)),
        linear-gradient(180deg, rgba(0,0,0,.40), rgba(0,0,0,.70));
      pointer-events:none;
      z-index: 2;
    }
    .heroVideo{
      position:absolute;
      inset:0;
      z-index: 1;
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-2), var(--bg));
    }
    .heroVideo__ph{
      position:absolute;
      inset:0;
      background:
        radial-gradient(140% 120% at 18% 10%, var(--ph-2), transparent 60%),
        radial-gradient(120% 120% at 82% 85%, var(--ph-1), transparent 65%),
        linear-gradient(180deg, var(--bg-2), var(--bg));
      animation: phBreath var(--ph-breath) var(--ease-soft) infinite;
      z-index: 1;
    }
    @keyframes phBreath{
      0%{ filter: contrast(1) brightness(1); opacity: .70; }
      50%{ filter: contrast(1.05) brightness(1.04); opacity: .95; }
      100%{ filter: contrast(1) brightness(1); opacity: .70; }
    }
    .heroVideo__thumb{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      opacity: 0;
      transform: scale(1.02);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out);
      filter: contrast(1.02) saturate(.95);
      z-index: 2;
      pointer-events:none;
    }
    .heroVideo.is-thumb-loaded .heroVideo__thumb{ opacity: 1; transform: scale(1.00); }

    .heroVideo__mount{
      position:absolute;
      inset:0;
      z-index: 3;
      pointer-events:none;
      opacity: 0;
      transition: opacity var(--dur-3) var(--ease-out);
    }
    .heroVideo.is-mounted .heroVideo__mount{ opacity: 1; }

    .heroVideo__cover{
      position:absolute;
      inset:-10%;
      transform: scale(1.22);
      transform-origin:center;
    }
    .heroVideo__cover iframe{
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      border:0;
    }
    @media (max-width: 520px){
      .heroVideo__cover{ transform: scale(1.28); }
    }

    .hero__wrap{
      position: relative;
      z-index: 3;
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--s-4);
      align-items: start;
    }
    .hero__title{
      font-family: var(--font-display);
      font-size: var(--fs-4);
      line-height: 1.02;
      letter-spacing: .02em;
      margin: 0 0 var(--s-2);
      max-width: 18ch;
    }
    .hero__sub{
      margin: 0 0 var(--s-3);
      max-width: 72ch;
      font-size: var(--fs-1);
    }
    .hero__cta{ display:flex; flex-wrap: wrap; gap: .75rem; align-items:center; }

    .scrollCue{
      margin-top: var(--s-4);
      display:flex;
      flex-direction: column;
      align-items: flex-start;
      gap: .60rem;
      width: fit-content;
      color: rgba(255,255,255,.60);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .78em;
      pointer-events:none;
    }
    .scrollCue__arrow{
      width: 46px;
      height: 46px;
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.18);
      overflow: hidden;
      box-shadow: 0 18px 90px rgba(0,0,0,.60);
    }
    .scrollCue__arrow i{
      animation: arrowDrop 1.45s var(--ease-soft) infinite;
      opacity: .95;
      color: rgba(255,255,255,.92);
    }
    @keyframes arrowDrop{
      0%{ transform: translateY(-2px); opacity: .55; }
      45%{ transform: translateY(6px); opacity: 1; }
      100%{ transform: translateY(-2px); opacity: .55; }
    }

    .split{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: var(--s-5);
      align-items: start;
    }
    @media (max-width: 980px){
      .split{ grid-template-columns: 1fr; }
    }

    .pillRow{
      margin-top: var(--s-4);
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--s-3);
    }
    @media (max-width: 780px){
      .pillRow{ grid-template-columns: 1fr; }
    }

    .pill{
      border: 0;
      border-radius: 0;
      padding: 0;
      background: transparent;
      box-shadow: none;
    }
    .pill__title{
      margin: 0 0 .35rem;
      font-weight: 950;
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .90em;
      color: var(--text);
      display:flex;
      align-items:center;
      gap:.6rem;
    }
    .pill__title i{ color: var(--accent); opacity: .95; }
    .pill__text{ margin: 0; color: var(--muted); max-width: 66ch; }

    .hScroll, .gridItem{ border-radius: 0; }

    .hScroll{
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: linear-gradient(180deg, var(--bg-2), var(--bg));
      box-shadow: 0 28px 120px var(--shadow);
      overflow: hidden;
    }
    .hScroll__rail{
      display:flex;
      overflow-x:auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .hScroll__rail::-webkit-scrollbar{ display:none; }

    .hScroll__item{
      flex: 0 0 100%;
      scroll-snap-align: start;
      position: relative;
      aspect-ratio: 4 / 5;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      border-right: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      overflow:hidden;
    }
    .hScroll__item:last-child{ border-right: 0; }

    .media{
      position:absolute;
      inset:0;
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      display:block;
      text-decoration:none;
      color:inherit;
      cursor: zoom-in;
      -webkit-tap-highlight-color: transparent;
    }

    .media__ph{
      position:absolute;
      inset:0;
      background:
        radial-gradient(140% 120% at 18% 10%, var(--ph-2), transparent 60%),
        radial-gradient(120% 120% at 82% 85%, var(--ph-1), transparent 65%),
        linear-gradient(180deg, var(--bg-3), var(--bg));
      animation: phBreath var(--ph-breath) var(--ease-soft) infinite;
    }
    .media__img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      opacity: 0;
      transform: scale(1.02);
      filter: blur(2px);
      transition: opacity 680ms var(--ease-out), transform 980ms var(--ease-out), filter 980ms var(--ease-out);
      will-change: opacity, transform, filter;
      pointer-events:none;
    }
    .is-loaded .media__img{
      opacity: 1;
      transform: scale(1);
      filter: blur(0);
    }
    .has-error .media__img{ display:none; }

    .hScroll__meta{
      padding: .85rem 1.05rem;
      display:flex;
      justify-content: center;
      align-items:center;
      border-top: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
    }

    .dots{ display:flex; align-items:center; gap: .45rem; }
    .dot{
      appearance:none;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: color-mix(in oklab, var(--border) 70%, transparent);
      border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      transition: transform var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), border-color var(--dur-2) var(--ease-out);
      cursor: pointer;
      padding: 0;
    }
    .dot.is-active{
      background: var(--accent);
      border-color: color-mix(in oklab, var(--accent) 70%, transparent);
      transform: scale(1.15);
    }
    .dot:focus-visible{ outline: 2px solid color-mix(in oklab, var(--text) 55%, transparent); outline-offset: 4px; }

    .grid3{
      margin-top: var(--s-5);
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: clamp(0.25rem, 0.18rem + 0.30vw, 0.55rem);
    }
    @media (max-width: 980px){
      .grid3{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      .grid3{ grid-template-columns: 1fr; }
    }
    .gridItem{
      margin: 0;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      box-shadow: 0 26px 110px var(--shadow);
      aspect-ratio: 3/4;
      position: relative;
    }

    .quote{
      margin: var(--s-4) 0 0;
      padding: var(--s-3);
      border-radius: var(--r-2);
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      box-shadow: 0 22px 90px var(--shadow);
      max-width: 78ch;
    }
    .quote p{ margin:0; color: var(--muted); font-size: var(--fs-0); }
    .quote .quote__mark{ color: var(--accent); font-weight: 950; letter-spacing: .08em; text-transform: uppercase; font-size: .82em; margin-bottom: .45rem; }

    .eventsCard{
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      border-radius: var(--r-3);
      padding: var(--s-5);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      box-shadow: 0 30px 140px var(--shadow);
      overflow: hidden;
    }
    .eventsMd > :first-child{ margin-top:0; }
    .eventsMd h1, .eventsMd h2, .eventsMd h3{
      font-family: var(--font-display);
      letter-spacing: .02em;
      margin: 1.15rem 0 .55rem;
      color: var(--text);
      line-height: 1.12;
    }
    .eventsMd p{ margin: .55rem 0; color: var(--muted); }
    .eventsMd ul, .eventsMd ol{ margin: .55rem 0; padding-left: 1.1rem; color: var(--muted); }
    .eventsMd li{ margin: .45rem 0; }
    .eventsMd a{
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 3px;
      color: var(--text);
    }
    .eventsMd code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .95em;
      padding: .12rem .35rem;
      border-radius: 10px;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface-2) 85%, transparent);
    }

    .contactPage{
      padding: clamp(7.5rem, 12vh, 10.5rem) 0 var(--s-6);
    }
    .contactCard{
      margin-top: var(--s-4);
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      border-radius: var(--r-3);
      padding: var(--s-5);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      box-shadow: 0 30px 140px var(--shadow);
      display:flex;
      flex-wrap: wrap;
      align-items:flex-start;
      justify-content: space-between;
      gap: var(--s-4);
    }
    .contactCard__right{ display:flex; flex-wrap: wrap; gap: .75rem; align-items:center; }

    .btnEmail{ position: relative; }
    .btnEmail__shell{ display:inline-flex; align-items:center; gap:.55rem; white-space: nowrap; }
    .btnEmail__email{ display:none; letter-spacing: .04em; text-transform: none; font-weight: 900; color: var(--accent); }
    .btnEmail.is-done .btnEmail__labelText{ display:none; }
    .btnEmail.is-done .btnEmail__email{ display:inline; }

    .btnBadge{
      position: absolute;
      left: 50%;
      top: -10px;
      transform: translateX(-50%) translateY(-8px);
      background: color-mix(in oklab, var(--bg) 82%, transparent);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .45rem .70rem;
      box-shadow: 0 22px 80px var(--shadow);
      display:flex;
      align-items:center;
      gap:.45rem;
      opacity: 0;
      pointer-events:none;
      transition: opacity var(--dur-2) var(--ease-out), transform var(--dur-2) var(--ease-out);
      z-index: 10;
      color: var(--text);
      letter-spacing: .10em;
      text-transform: uppercase;
      font-weight: 950;
      font-size: .72em;
      white-space: nowrap;
    }
    .btnBadge i{ color: var(--ok); }
    .btnBadge.is-show{
      opacity: 1;
      transform: translateX(-50%) translateY(-16px);
    }

    .site-footer{
      padding: var(--s-4) 0 var(--s-5);
      border-top: 1px solid color-mix(in oklab, var(--border) 80%, transparent);
      background: color-mix(in oklab, var(--bg) 92%, transparent);
    }
    .footer__wrap{
      display:flex;
      justify-content: space-between;
      gap: var(--s-2);
      align-items:center;
      flex-wrap: wrap;
    }
    .footer__links{ display:flex; gap: .9rem; align-items:center; flex-wrap: wrap; }
    .footer__links a{
      color: var(--muted);
      letter-spacing: .12em;
      text-transform: uppercase;
      font-size: .82em;
      display:inline-flex;
      align-items:center;
      gap: .45rem;
      padding: .25rem .35rem;
      border-radius: 10px;
      transition: color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out);
    }
    .footer__links a:hover{
      color: var(--text);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
    }
    .footer__links i{ color: var(--accent); opacity: .95; }

    .reveal{
      opacity: 0;
      transform: translateY(14px);
      filter: blur(2px);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }
    .reveal.is-inview{
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }

    .glightbox-clean .gdesc-inner,
    .glightbox-clean .gslide-description{ display:none !important; }
  </style>
</head>

<body>
  <a class="skip-link" href="#main">Vai al contenuto</a>

  <header class="site-header" data-component="header">
    <div class="wrap header__wrap">
      <div class="headerPill" data-header-pill>
        <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menu" aria-expanded="false" title="Menu">
          <i class="fa-solid fa-bars"></i>
        </button>

        <div class="popMenu" data-popmenu aria-hidden="true">
          <a class="icon-btn" href="./" data-route="/" aria-label="Home" title="Home">
            <i class="fa-solid fa-house"></i>
          </a>

          <a class="icon-btn" href="#progetto" data-route="#progetto" aria-label="Progetto" title="Progetto">
            <i class="fa-solid fa-compass"></i>
          </a>

          <a class="icon-btn" href="#eventi" data-route="#eventi" aria-label="Eventi" title="Eventi">
            <i class="fa-solid fa-calendar-day"></i>
          </a>

          <a class="icon-btn" href="#cosa" data-route="#cosa" aria-label="Cosa facciamo" title="Cosa facciamo">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
          </a>

          <a class="icon-btn" href="./contatti" data-route="/contatti" aria-label="Contatti" title="Contatti">
            <i class="fa-solid fa-paper-plane"></i>
          </a>

          <button class="icon-btn" type="button" data-action="toggle-theme" aria-label="Cambia tema (dark/light)" title="Tema">
            <i class="fa-solid fa-sun"></i>
          </button>

          <button class="chip-btn" type="button" data-action="toggle-language" title="Lingua">
            <i class="fa-solid fa-globe"></i>
            <span class="chip-label" data-lang-label>IT</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <div class="viewShell" data-view-shell aria-live="polite">
      <div data-view="home" data-home-view>
        <section class="hero" aria-label="Intro" data-hero>
          <!-- TODO: sostituisci con l'ID reale del trailer (solo ID, non URL) -->
          <div class="heroVideo" data-hero-video data-youtube-id="YOUTUBE_ID_HERE" aria-hidden="true">
            <div class="heroVideo__ph"></div>
            <img class="heroVideo__thumb" alt="" data-thumb>
            <div class="heroVideo__mount" data-video-mount></div>
          </div>

          <div class="wrap hero__wrap">
            <div class="reveal">
              <p class="kicker">Opera Viva</p>

              <h1 class="hero__title">
                <span lang="it">Navi, equipaggi, rotte</span>
                <span lang="en">Ships, crews, routes</span>
              </h1>

              <p class="hero__sub">
                <span lang="it">Un progetto fotografico che insegue il mare e i suoi protagonisti: portuali, marinai, imbarcazioni. Collodio umido, infrarosso e pellicola per trasformare ogni scafo in un’opera senza tempo.</span>
                <span lang="en">A photographic project that follows the sea and its protagonists: dockworkers, sailors, vessels. Wet plate collodion, infrared, and film to turn each hull into a timeless piece.</span>
              </p>

              <div class="hero__cta">
                <a class="btn btn--primary" href="#progetto" data-route="#progetto">
                  <i class="fa-solid fa-compass"></i>
                  <span lang="it">Scopri</span><span lang="en">Discover</span>
                </a>

                <a class="btn btn--ghost" href="./contatti" data-route="/contatti">
                  <i class="fa-solid fa-paper-plane"></i>
                  <span lang="it">Contatti</span><span lang="en">Contact</span>
                </a>
              </div>

              <div class="scrollCue" aria-hidden="true">
                <div><span lang="it">Scorri</span><span lang="en">Scroll</span></div>
                <div class="scrollCue__arrow"><i class="fa-solid fa-arrow-down"></i></div>
              </div>
            </div>
          </div>
        </section>

        <!-- 2) Spiegazione progetto -->
        <section id="progetto" class="section" aria-label="Il progetto">
          <div class="wrap split">
            <div class="reveal">
              <p class="kicker"><span lang="it">Il progetto</span><span lang="en">The project</span></p>

              <h2 class="h2">
                <span lang="it">Opera Viva</span>
                <span lang="en">Opera Viva</span>
              </h2>

              <p class="lead">
                <span lang="it">Il mare è un luogo dove l’uomo si misura con sé stesso, con la bellezza e con il tempo. Ogni nave porta un carattere, un’anima: non è solo un mezzo, è un essere vivo e un testimone delle mani che l’hanno costruita.</span>
                <span lang="en">The sea is where people measure themselves against beauty and time. Every ship carries a character, a soul: more than a vehicle, it is a living witness shaped by the hands that built it.</span>
              </p>

              <p class="p">
                <span lang="it">Raccogliamo storie di porti, equipaggi e imbarcazioni come se fossero protagonisti di una nuova epopea, sospesi tra la forza del ferro e la fragilità del tempo. Attraverso collodio umido e sguardi infrarossi che rivelano ciò che spesso resta invisibile, trasformiamo superfici e volti in tracce di luce.</span>
                <span lang="en">We collect stories of ports, crews, and vessels as protagonists of a new epic, suspended between the strength of iron and the fragility of time. Through wet plate collodion and infrared views that reveal what is usually unseen, we turn surfaces and faces into traces of light.</span>
              </p>

              <div class="quote" aria-label="Citazione">
                <div class="quote__mark"><span lang="it">Odissea</span><span lang="en">Odyssey</span></div>
                <p>
                  <span lang="it">Come nell’Odissea, ogni rotta è una prova: non cerchiamo solo un approdo, ma un racconto che resista al sale e alla distanza.</span>
                  <span lang="en">Like in the Odyssey, every route is a trial: we are not only seeking a harbor, but a story that can endure salt and distance.</span>
                </p>
              </div>

              <div class="pillRow" aria-label="Punti chiave">
                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-anchor"></i>
                    <span lang="it">Una nuova epopea</span><span lang="en">A new epic</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Navi ed equipaggi come personaggi: miti antichi e rotte reali nello stesso respiro.</span>
                    <span lang="en">Ships and crews as characters: ancient myths and real routes in the same breath.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-flask"></i>
                    <span lang="it">Tecniche antiche</span><span lang="en">Historic techniques</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Collodio umido su vetro o metallo: un processo lento, fisico, irripetibile.</span>
                    <span lang="en">Wet plate on glass or metal: a slow, physical, unrepeatable process.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-eye"></i>
                    <span lang="it">Infrarosso</span><span lang="en">Infrared</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Un altro strato della realtà: superfici e cieli si riscrivono, emergono dettagli nascosti.</span>
                    <span lang="en">Another layer of reality: surfaces and skies rewrite themselves, hidden details emerge.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-route"></i>
                    <span lang="it">Mostra itinerante</span><span lang="en">Traveling show</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Opera Viva si muove: porti, città e spazi espositivi in continuo aggiornamento.</span>
                    <span lang="en">Opera Viva moves: ports, cities, and exhibition spaces updated over time.</span>
                  </p>
                </article>
              </div>
            </div>

            <div class="reveal">
              <div class="hScroll" data-hscroll aria-label="Gallery orizzontale Opera Viva">
                <div class="hScroll__rail" data-hscroll-rail>
                  <div class="hScroll__item" data-component="smart-media">
                    <a class="media glightbox" href="img/opera-viva-1.jpg" data-gallery="progetto" data-type="image" aria-label="Apri immagine 1">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/opera-viva-1.jpg" alt="Opera Viva, foto 01" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" data-component="smart-media">
                    <a class="media glightbox" href="img/opera-viva-2.jpg" data-gallery="progetto" data-type="image" aria-label="Apri immagine 2">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/opera-viva-2.jpg" alt="Opera Viva, foto 02" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" data-component="smart-media">
                    <a class="media glightbox" href="img/opera-viva-3.jpg" data-gallery="progetto" data-type="image" aria-label="Apri immagine 3">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/opera-viva-3.jpg" alt="Opera Viva, foto 03" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" data-component="smart-media">
                    <a class="media glightbox" href="img/opera-viva-4.jpg" data-gallery="progetto" data-type="image" aria-label="Apri immagine 4">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/opera-viva-4.jpg" alt="Opera Viva, foto 04" decoding="async" loading="lazy">
                    </a>
                  </div>
                </div>

                <div class="hScroll__meta">
                  <div class="dots" aria-label="Navigazione gallery" data-hscroll-dots>
                    <button class="dot is-active" type="button" data-dot="0" aria-label="Vai a foto 1"></button>
                    <button class="dot" type="button" data-dot="1" aria-label="Vai a foto 2"></button>
                    <button class="dot" type="button" data-dot="2" aria-label="Vai a foto 3"></button>
                    <button class="dot" type="button" data-dot="3" aria-label="Vai a foto 4"></button>
                  </div>
                </div>
              </div>

              <p class="micro" style="margin-top: var(--s-3);">
                <span lang="it">Foto: ./img/opera-viva-1.jpg … opera-viva-10.jpg</span>
                <span lang="en">Photos: ./img/opera-viva-1.jpg … opera-viva-10.jpg</span>
              </p>
            </div>
          </div>
        </section>

        <!-- 3) Eventi (da eventi.md) -->
        <section id="eventi" class="section" aria-label="Eventi">
          <div class="wrap split">
            <div class="reveal">
              <p class="kicker"><span lang="it">Eventi</span><span lang="en">Events</span></p>

              <h2 class="h2">
                <span lang="it">Mostra itinerante</span>
                <span lang="en">Traveling exhibition</span>
              </h2>

              <p class="lead">
                <span lang="it">Opera Viva si sposta in Italia tra mostre, festival, porti e spazi indipendenti. Qui sotto trovi le prossime tappe, aggiornate in automatico.</span>
                <span lang="en">Opera Viva moves across Italy through exhibitions, festivals, ports, and independent spaces. Below you will find the next stops, updated automatically.</span>
              </p>

              <p class="p">
                <span lang="it">Per aggiornare questa sezione basta modificare il file <span class="emph">eventi.md</span> accanto a <span class="emph">index.html</span>.</span>
                <span lang="en">To update this section, edit <span class="emph">eventi.md</span> next to <span class="emph">index.html</span>.</span>
              </p>
            </div>

            <div class="reveal">
              <div class="eventsCard" role="region" aria-label="Lista eventi">
                <div class="eventsMd" data-events data-events-src="/eventi.md">
                  <p class="p" style="margin:0;">
                    <span lang="it">Caricamento eventi…</span>
                    <span lang="en">Loading events…</span>
                  </p>
                </div>

                <p class="micro" style="margin-top: var(--s-3);">
                  <span lang="it">Fonte: eventi.md</span>
                  <span lang="en">Source: eventi.md</span>
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- 4) Cosa facciamo -->
        <section id="cosa" class="section" aria-label="Cosa facciamo">
          <div class="wrap">
            <div class="reveal">
              <p class="kicker"><span lang="it">Cosa facciamo</span><span lang="en">What we do</span></p>

              <h2 class="h2">
                <span lang="it">Opere, commissioni e racconti</span>
                <span lang="en">Works, commissions, stories</span>
              </h2>

              <p class="lead">
                <span lang="it">Realizziamo opere singole e percorsi completi: dall’immagine come oggetto da parete fino al racconto lungo, vissuto a bordo e raccolto in un libro.</span>
                <span lang="en">We create single works and complete paths: from an image as a wall object to long-form storytelling, experienced on board and collected in a book.</span>
              </p>
            </div>

            <div class="pillRow" aria-label="Servizi">
              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-ruler-combined"></i>
                  <span lang="it">Opere su misura</span><span lang="en">Custom wall pieces</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Formati e finiture pensati per spazi reali: casa, studio, barca, galleria. Ogni opera nasce per essere esposta.</span>
                  <span lang="en">Formats and finishes designed for real spaces: home, studio, boat, gallery. Each piece is made to be displayed.</span>
                </p>
              </article>

              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-layer-group"></i>
                  <span lang="it">Tintype, Ambrotype, Pellicola</span><span lang="en">Tintype, Ambrotype, Film</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Metallo, vetro, negativo: tre supporti, tre caratteri. Ti guidiamo nella scelta in base a estetica e durata.</span>
                  <span lang="en">Metal, glass, negative: three supports, three characters. We guide the choice based on aesthetics and longevity.</span>
                </p>
              </article>

              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-print"></i>
                  <span lang="it">Fine art da infrarosso</span><span lang="en">Infrared fine art prints</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Infrarosso digitale e stampa fine art: un linguaggio diverso, capace di riscrivere cieli e superfici.</span>
                  <span lang="en">Digital infrared and fine art printing: a distinct language that rewrites skies and surfaces.</span>
                </p>
              </article>

              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-portrait"></i>
                  <span lang="it">Opere singole</span><span lang="en">Single works</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Ritratti, imbarcazioni, dettagli di bordo. Un’immagine come oggetto, con un processo dichiarato.</span>
                  <span lang="en">Portraits, vessels, onboard details. An image as an object, with a declared process.</span>
                </p>
              </article>

              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-ship"></i>
                  <span lang="it">Imbarco e viaggio</span><span lang="en">Onboard stories</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Possibilità di imbarcarci per più giorni per seguire una rotta, un equipaggio, un lavoro. Racconto sul campo.</span>
                  <span lang="en">We can board for multiple days to follow a route, a crew, a job. Field storytelling.</span>
                </p>
              </article>

              <article class="pill reveal">
                <h3 class="pill__title">
                  <i class="fa-solid fa-book"></i>
                  <span lang="it">Fotolibro stampato</span><span lang="en">Printed photobook</span>
                </h3>
                <p class="pill__text">
                  <span lang="it">Quando serve un racconto lungo: immagini, testi e impaginazione per fissare una storia in un volume.</span>
                  <span lang="en">When a long narrative is needed: images, text, and layout to fix a story into a volume.</span>
                </p>
              </article>
            </div>

            <div class="grid3" aria-label="Galleria Opera Viva">
              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-5.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 5">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-5.jpg" alt="Opera Viva, foto 05" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-6.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 6">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-6.jpg" alt="Opera Viva, foto 06" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-7.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 7">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-7.jpg" alt="Opera Viva, foto 07" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-8.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 8">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-8.jpg" alt="Opera Viva, foto 08" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-9.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 9">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-9.jpg" alt="Opera Viva, foto 09" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" data-component="smart-media">
                <a class="media glightbox" href="img/opera-viva-10.jpg" data-gallery="galleria" data-type="image" aria-label="Apri foto 10">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/opera-viva-10.jpg" alt="Opera Viva, foto 10" decoding="async" loading="lazy">
                </a>
              </figure>
            </div>

            <div style="margin-top: var(--s-5);" class="reveal">
              <a class="btn btn--primary" href="./contatti" data-route="/contatti">
                <i class="fa-solid fa-paper-plane"></i>
                <span lang="it">Richiedi disponibilità</span><span lang="en">Ask availability</span>
              </a>
            </div>
          </div>
        </section>
      </div>
    </div>

    <template id="tpl-contact">
      <div data-view="contact" data-contact-view>
        <section class="contactPage" aria-label="Contatti">
          <div class="wrap">
            <div class="reveal">
              <p class="kicker"><span lang="it">Contatti</span><span lang="en">Contact</span></p>

              <h1 class="hero__title" style="max-width: 26ch; margin-bottom: var(--s-2);">
                <span lang="it">Scrivici per mostre, commissioni e collaborazioni</span>
                <span lang="en">Reach out for exhibitions, commissions, and collaborations</span>
              </h1>

              <p class="hero__sub" style="margin-bottom: 0; color: var(--muted);">
                <span lang="it">Siamo disponibili in Italia. Se vuoi portare Opera Viva nella tua città, o commissionare un lavoro, scrivici.</span>
                <span lang="en">Available in Italy. If you want to host Opera Viva in your city, or commission a work, write us.</span>
              </p>

              <p class="micro" style="margin-top: .75rem;">
                <span lang="it">Italia · Itinerante</span>
                <span lang="en">Italy · Traveling</span>
              </p>
            </div>

            <div class="contactCard reveal">
              <div style="max-width: 72ch;">
                <p class="lead" style="margin:0;">
                  <span lang="it"><span class="emph">Email</span> e <span class="emph">Instagram</span> sono i canali più veloci. Rispondiamo appena possibile.</span>
                  <span lang="en"><span class="emph">Email</span> and <span class="emph">Instagram</span> are the fastest channels. We reply as soon as possible.</span>
                </p>
              </div>

              <div class="contactCard__right" aria-label="Azioni contatto">
                <button class="btn btn--primary btnEmail" type="button" data-action="copy-email" aria-label="Vedi email e copia">
                  <span class="btnBadge" aria-hidden="true" data-email-badge>
                    <i class="fa-solid fa-circle-check"></i>
                    <span lang="it">Copiata</span><span lang="en">Copied</span>
                  </span>

                  <span class="btnEmail__shell">
                    <i class="fa-solid fa-envelope"></i>
                    <span class="btnEmail__labelText"><span lang="it">Vedi email</span><span lang="en">View email</span></span>
                    <span class="btnEmail__email">contact@operaviva.it</span>
                  </span>
                </button>

                <!-- TODO: aggiorna l'handle -->
                <a class="btn btn--ghost" href="https://instagram.com/operaviva" rel="noopener" target="_blank">
                  <i class="fa-brands fa-instagram"></i>
                  <span>Instagram</span>
                </a>

                <a class="btn btn--ghost" href="./" data-route="/">
                  <i class="fa-solid fa-house"></i>
                  <span lang="it">Torna alla home</span><span lang="en">Back to home</span>
                </a>
              </div>
            </div>
          </div>
        </section>
      </div>
    </template>
  </main>

  <footer class="site-footer" data-component="footer">
    <div class="wrap footer__wrap">
      <p class="micro">© <span data-year></span> Opera Viva</p>
      <div class="footer__links">
        <a href="#main" data-action="back-to-top"><i class="fa-solid fa-arrow-up"></i><span lang="it">Top</span><span lang="en">Top</span></a>
        <a href="./contatti" data-route="/contatti"><i class="fa-solid fa-paper-plane"></i><span lang="it">Contatti</span><span lang="en">Contact</span></a>
      </div>
    </div>
  </footer>

  <div class="sr-only" aria-live="polite" aria-atomic="true" data-announcer></div>

  <!-- Lightbox JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

  <!-- Markdown parser + sanitizer (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>

  <script>
    (function(){
      "use strict";

      const root = document.documentElement;
      const header = document.querySelector('[data-component="header"]');
      const announcer = document.querySelector('[data-announcer]');
      const viewShell = document.querySelector('[data-view-shell]');
      const tplContact = document.getElementById('tpl-contact');

      const popMenu = document.querySelector('[data-popmenu]');
      const menuToggle = document.querySelector('[data-action="toggle-menu"]');

      // TODO: aggiorna email e IG se necessario
      const emailValue = "contact@operaviva.it";
      let HOME_HTML = "";
      let heroIO = null;

      let lightbox = null;

      // GitHub Pages project-site base path
      // TODO: se pubblichi su github.io come project page, metti qui il nome repo
      const GITHUB_REPO = "opera-viva";
      const isGithubHost = window.location.hostname.toLowerCase().endsWith(".github.io");
      const BASE_PATH = isGithubHost ? ("/" + GITHUB_REPO) : "";

      const prefersReducedMotion = () =>
        window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const safeStorage = {
        get(key){ try{ return localStorage.getItem(key); }catch{ return null; } },
        set(key,val){ try{ localStorage.setItem(key,val); }catch{ } }
      };

      const announce = (msg) => { if(announcer) announcer.textContent = msg; };

      const normalizeRoute = (p) => {
        let s = (p || '/');
        s = s.replace(/\/+$/, '');
        if(s === '') s = '/';
        if(!s.startsWith('/')) s = '/' + s;
        return s;
      };

      const routeFromLocation = () => {
        let p = window.location.pathname || '/';
        if(BASE_PATH && p.startsWith(BASE_PATH)){
          p = p.slice(BASE_PATH.length) || '/';
        }
        return normalizeRoute(p);
      };

      const withBase = (route) => {
        const r = normalizeRoute(route);
        if(!BASE_PATH) return r;
        if(r === '/') return BASE_PATH + '/';
        return BASE_PATH + r;
      };

      const isMenuOpen = () => popMenu && popMenu.classList.contains('is-open');

      const openMenu = () => {
        if(!popMenu || !menuToggle) return;
        popMenu.classList.add('is-open');
        popMenu.setAttribute('aria-hidden', 'false');
        menuToggle.classList.add('is-active');
        menuToggle.setAttribute('aria-expanded', 'true');
      };

      const closeMenu = () => {
        if(!popMenu || !menuToggle) return;
        popMenu.classList.remove('is-open');
        popMenu.setAttribute('aria-hidden', 'true');
        menuToggle.classList.remove('is-active');
        menuToggle.setAttribute('aria-expanded', 'false');
      };

      const toggleMenu = () => { isMenuOpen() ? closeMenu() : openMenu(); };

      const THEME_KEY = 'ov_theme';
      const applyTheme = (theme) => {
        const t = theme === 'light' ? 'light' : 'dark';
        root.setAttribute('data-theme', t);
        safeStorage.set(THEME_KEY, t);
        document.querySelectorAll('[data-action="toggle-theme"] i').forEach((icon) => {
          icon.className = (t === 'dark') ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
        });
      };
      const initTheme = () => {
        const saved = safeStorage.get(THEME_KEY);
        if(saved){ applyTheme(saved); return; }
        applyTheme('dark');
      };

      const LANG_KEY = 'ov_lang';

      const updateLangToggleUI = () => {
        const l = (root.getAttribute('data-language') === 'en') ? 'en' : 'it';
        const next = (l === 'it') ? 'en' : 'it';

        document.querySelectorAll('[data-lang-label]').forEach(el => {
          el.textContent = l.toUpperCase();
        });

        document.querySelectorAll('[data-action="toggle-language"]').forEach(btn => {
          const aria = (next === 'en') ? 'Cambia lingua in inglese' : 'Switch language to Italian';
          btn.setAttribute('aria-label', aria);
          btn.setAttribute('title', (next === 'en') ? 'EN' : 'IT');
        });
      };

      const applyLanguage = (lang) => {
        const l = lang === 'en' ? 'en' : 'it';
        root.setAttribute('data-language', l);
        safeStorage.set(LANG_KEY, l);
        document.documentElement.setAttribute('lang', l);
        updateLangToggleUI();
        announce(l === 'it' ? 'Lingua impostata su Italiano' : 'Language set to English');
      };

      const initLanguage = () => {
        const params = new URLSearchParams(window.location.search);
        const urlLang = params.get('lang');
        const saved = safeStorage.get(LANG_KEY);
        applyLanguage(urlLang || saved || 'it');
      };

      const initHeaderScroll = () => {
        if(!header) return;
        let ticking = false;

        const onScroll = () => {
          header.classList.toggle('is-scrolled', window.scrollY > 12);
          ticking = false;
        };

        window.addEventListener('scroll', () => {
          if (ticking) return;
          ticking = true;
          requestAnimationFrame(onScroll);
        }, { passive: true });

        onScroll();
      };

      const initHeaderHeroSense = () => {
        if(!header) return;

        header.classList.remove('is-over-hero');
        if(heroIO){ try{ heroIO.disconnect(); }catch{} heroIO = null; }

        const hero = document.querySelector('[data-hero]');
        if(!hero) return;

        if('IntersectionObserver' in window){
          heroIO = new IntersectionObserver((entries) => {
            const entry = entries[0];
            if(!entry) return;
            header.classList.toggle('is-over-hero', !!entry.isIntersecting);
          }, { threshold: 0.15 });

          heroIO.observe(hero);
        } else {
          header.classList.add('is-over-hero');
        }
      };

      const revealIn = (scope) => {
        const rootEl = scope || document;
        const els = Array.from(rootEl.querySelectorAll('.reveal'));
        if(!els.length) return;

        if(prefersReducedMotion()){
          els.forEach(el => el.classList.add('is-inview'));
          return;
        }

        if('IntersectionObserver' in window){
          const io = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if(!entry.isIntersecting) return;
              entry.target.classList.add('is-inview');
              io.unobserve(entry.target);
            });
          }, { rootMargin: '0px 0px -10% 0px', threshold: 0.12 });

          els.forEach(el => io.observe(el));
        } else {
          els.forEach(el => el.classList.add('is-inview'));
        }
      };

      const smartMediaIn = (scope) => {
        const rootEl = scope || document;
        const imgs = Array.from(rootEl.querySelectorAll('img[data-src]'));
        if(!imgs.length) return;

        const loadImg = (img) => {
          const src = img.getAttribute('data-src');
          if(!src) return;

          const holder = img.closest('[data-component="smart-media"]');
          const onLoad = () => holder && holder.classList.add('is-loaded');
          const onError = () => holder && holder.classList.add('has-error');

          img.addEventListener('load', onLoad, { once: true });
          img.addEventListener('error', onError, { once: true });

          img.setAttribute('src', src);
          img.removeAttribute('data-src');
        };

        if('IntersectionObserver' in window){
          const io = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if(!entry.isIntersecting) return;
              io.unobserve(entry.target);
              loadImg(entry.target);
            });
          }, { rootMargin: '0px', threshold: 0.01 });

          imgs.forEach(img => io.observe(img));
        } else {
          imgs.forEach(loadImg);
        }
      };

      const initLightbox = () => {
        if(!window.GLightbox) return;
        if(lightbox){
          try{ lightbox.destroy(); }catch{}
          lightbox = null;
        }
        lightbox = window.GLightbox({
          selector: '.glightbox',
          touchNavigation: true,
          keyboardNavigation: true,
          closeButton: true,
          loop: true,
          zoomable: false,
          draggable: true,
          openEffect: 'fade',
          closeEffect: 'fade',
          slideEffect: 'slide',
          skin: 'clean'
        });
      };

      const initHeroVideo = () => {
        const heroVideo = document.querySelector('[data-hero-video]');
        if(!heroVideo) return;

        const videoId = heroVideo.getAttribute('data-youtube-id');
        const img = heroVideo.querySelector('[data-thumb]');
        const mount = heroVideo.querySelector('[data-video-mount]');
        if(!videoId || !img || !mount || videoId === "YOUTUBE_ID_HERE") return;

        const candidates = [
          `https://i.ytimg.com/vi/${encodeURIComponent(videoId)}/maxresdefault.jpg`,
          `https://i.ytimg.com/vi/${encodeURIComponent(videoId)}/hqdefault.jpg`
        ];

        let idx = 0;
        const tryLoad = () => {
          img.onload = () => heroVideo.classList.add('is-thumb-loaded');
          img.onerror = () => { idx += 1; if(idx < candidates.length) tryLoad(); };
          img.src = candidates[idx];
        };
        tryLoad();

        const mountIframe = () => {
          if(heroVideo.classList.contains('is-mounted')) return;

          const reduce = prefersReducedMotion();
          const start = 0;

          const cover = document.createElement('div');
          cover.className = 'heroVideo__cover';

          const iframe = document.createElement('iframe');
          iframe.title = "Opera Viva - Trailer";
          iframe.loading = "eager";
          iframe.allowFullscreen = false;
          iframe.referrerPolicy = "strict-origin-when-cross-origin";
          iframe.allow = "autoplay; encrypted-media; picture-in-picture; web-share";

          const params = new URLSearchParams({
            autoplay: reduce ? "0" : "1",
            mute: "1",
            playsinline: "1",
            rel: "0",
            modestbranding: "1",
            controls: "0",
            disablekb: "1",
            fs: "0",
            iv_load_policy: "3",
            start: String(start),
            loop: "1",
            playlist: videoId
          });

          iframe.src = "https://www.youtube.com/embed/" + encodeURIComponent(videoId) + "?" + params.toString();

          cover.appendChild(iframe);
          mount.appendChild(cover);
          heroVideo.classList.add('is-mounted');
        };

        const delayed = () => window.setTimeout(mountIframe, 260);
        if('requestIdleCallback' in window){
          window.requestIdleCallback(delayed, { timeout: 1200 });
        } else {
          delayed();
        }
      };

      const initHScroll = () => {
        const box = document.querySelector('[data-hscroll]');
        if(!box) return;
        const rail = box.querySelector('[data-hscroll-rail]');
        const dotsWrap = box.querySelector('[data-hscroll-dots]');
        if(!rail || !dotsWrap) return;

        const dots = Array.from(dotsWrap.querySelectorAll('.dot'));
        const max = dots.length;

        const setActive = (idx) => {
          dots.forEach((d, i) => d.classList.toggle('is-active', i === idx));
        };

        const snapWidth = () => rail.getBoundingClientRect().width || 1;

        const goTo = (idx) => {
          const w = snapWidth();
          const target = Math.max(0, Math.min(max - 1, idx));
          rail.scrollTo({
            left: target * w,
            behavior: prefersReducedMotion() ? 'auto' : 'smooth'
          });
          setActive(target);
        };

        const onScroll = () => {
          const w = snapWidth();
          const idx = Math.round(rail.scrollLeft / w);
          setActive(Math.max(0, Math.min(max - 1, idx)));
        };

        rail.addEventListener('scroll', () => requestAnimationFrame(onScroll), { passive: true });

        dotsWrap.addEventListener('click', (e) => {
          const btn = e.target.closest('.dot[data-dot]');
          if(!btn) return;
          const idx = Number(btn.getAttribute('data-dot'));
          if(Number.isFinite(idx)) goTo(idx);
        });

        setActive(0);
      };

      const initEvents = async (scope) => {
        const rootEl = scope || document;
        const box = rootEl.querySelector('[data-events]');
        if(!box) return;

        const src = box.getAttribute('data-events-src') || '/eventi.md';
        const url = src.startsWith('http') ? src : withBase(src.startsWith('/') ? src : ('/' + src));

        if(!window.markdownit) return;

        try{
          const res = await fetch(url, { cache: 'no-cache' });
          if(!res.ok) throw new Error("HTTP " + res.status);
          const mdText = await res.text();

          const md = window.markdownit({
            html: false,
            linkify: true,
            breaks: true
          });

          const raw = md.render(mdText || "");
          const clean = (window.DOMPurify && window.DOMPurify.sanitize)
            ? window.DOMPurify.sanitize(raw, { USE_PROFILES: { html: true } })
            : raw;

          box.innerHTML = clean || "";
        }catch{
          box.innerHTML = `
            <p class="p" style="margin:0;">
              ${root.getAttribute('data-language') === 'en'
                ? 'Events are being updated. Please check back soon.'
                : 'Eventi in aggiornamento. Torna a controllare a breve.'}
            </p>
          `;
        }
      };

      const copyToClipboard = async (text) => {
        try{
          if(navigator.clipboard && navigator.clipboard.writeText){
            await navigator.clipboard.writeText(text);
            return true;
          }
        }catch{}

        try{
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly', '');
          ta.style.position = 'fixed';
          ta.style.top = '-9999px';
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          ta.remove();
          return true;
        }catch{
          return false;
        }
      };

      const showEmailBadge = (btn) => {
        const badge = btn.querySelector('[data-email-badge]');
        if(!badge) return;
        badge.classList.add('is-show');
        window.clearTimeout(badge._t);
        badge._t = window.setTimeout(() => badge.classList.remove('is-show'), 1100);
      };

      const setDocForRoute = (route) => {
        if(route === '/contatti'){
          document.title = (root.getAttribute('data-language') === 'en')
            ? "Contact | Opera Viva"
            : "Contatti | Opera Viva";
          return;
        }
        document.title = "Opera Viva | Fotografia di mare, navi ed equipaggi";
      };

      const swapView = async (route, opts) => {
        if(!viewShell) return;

        const routeNorm = normalizeRoute(route || '/');
        const current = viewShell.querySelector('[data-view]')?.getAttribute('data-view') || 'home';
        const target = (routeNorm === '/contatti') ? 'contact' : 'home';
        if(current === target) return;

        const reduce = prefersReducedMotion();
        const doAnim = !reduce;

        viewShell.classList.add('is-swapping');
        if(doAnim){
          viewShell.classList.add('is-leaving');
          await new Promise(r => window.setTimeout(r, 220));
        }

        viewShell.innerHTML = '';

        if(target === 'contact'){
          const frag = tplContact.content.cloneNode(true);
          viewShell.appendChild(frag);
        } else {
          viewShell.innerHTML = HOME_HTML;
        }

        setDocForRoute(routeNorm);

        viewShell.classList.remove('is-leaving');
        if(doAnim){
          viewShell.classList.add('is-entering');
          void viewShell.offsetHeight;
          viewShell.classList.remove('is-entering');
          viewShell.classList.add('is-entered');
          window.setTimeout(() => viewShell.classList.remove('is-entered'), 740);
        }

        revealIn(viewShell);
        smartMediaIn(viewShell);

        if(target === 'home'){
          initHScroll();
          initHeroVideo();
          initEvents(viewShell);
        }

        initLightbox();
        initHeaderHeroSense();

        if(opts && opts.scrollTo){
          const id = opts.scrollTo;
          const el = document.querySelector(id);
          if(el) el.scrollIntoView({ behavior: prefersReducedMotion() ? 'auto' : 'smooth', block: 'start' });
        } else {
          window.scrollTo({ top: 0, behavior: prefersReducedMotion() ? 'auto' : 'smooth' });
        }

        viewShell.classList.remove('is-swapping');
      };

      const navigate = async (to, options) => {
        const target = to || '/';
        const isHash = target.startsWith('#');

        if(isHash){
          const r = routeFromLocation();
          if(r === '/'){
            const el = document.querySelector(target);
            if(el) el.scrollIntoView({ behavior: prefersReducedMotion() ? 'auto' : 'smooth', block: 'start' });
            return;
          }
          history.pushState({ route: '/' }, "", withBase('/'));
          await swapView('/', { scrollTo: target });
          return;
        }

        const route = (target === '/contatti') ? '/contatti' : '/';
        history.pushState({ route }, "", withBase(route));
        await swapView(route, options);
      };

      const initActions = () => {
        document.addEventListener('click', async (e) => {
          const routeLink = e.target.closest('[data-route]');
          if(routeLink){
            const to = routeLink.getAttribute('data-route');
            const href = routeLink.getAttribute('href') || to || '';
            const dest = to || href;

            if(dest && (dest.startsWith('/') || dest.startsWith('#'))){
              e.preventDefault();
              closeMenu();
              await navigate(dest);
              return;
            }
          }

          const btn = e.target.closest('[data-action]');
          if(!btn) return;
          const action = btn.getAttribute('data-action');

          if(action === 'toggle-menu'){
            e.preventDefault();
            toggleMenu();
            return;
          }

          if(action === 'toggle-theme'){
            const current = root.getAttribute('data-theme') || 'dark';
            const next = current === 'dark' ? 'light' : 'dark';
            applyTheme(next);
            announce(next === 'dark' ? 'Tema scuro attivo' : 'Tema chiaro attivo');
            return;
          }

          if(action === 'toggle-language'){
            const current = (root.getAttribute('data-language') === 'en') ? 'en' : 'it';
            const next = (current === 'it') ? 'en' : 'it';
            applyLanguage(next);
            setDocForRoute(routeFromLocation());
            return;
          }

          if(action === 'back-to-top'){
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: prefersReducedMotion() ? 'auto' : 'smooth' });
            return;
          }

          if(action === 'copy-email'){
            const ok = await copyToClipboard(emailValue);
            btn.classList.add('is-done');
            announce(ok ? 'Email copiata' : 'Copia non riuscita');
            if(ok) showEmailBadge(btn);
            window.clearTimeout(btn._t);
            btn._t = window.setTimeout(() => btn.classList.remove('is-done'), 2200);
            return;
          }
        });

        document.addEventListener('keydown', (e) => {
          if(e.key === 'Escape') closeMenu();
        });

        document.addEventListener('pointerdown', (e) => {
          if(!isMenuOpen()) return;
          const inside = e.target.closest('[data-popmenu]') || e.target.closest('[data-action="toggle-menu"]');
          if(!inside) closeMenu();
        }, { passive: true });

        window.addEventListener('popstate', async () => {
          closeMenu();
          await swapView(routeFromLocation());
        });
      };

      const initYear = () => {
        const el = document.querySelector('[data-year]');
        if(el) el.textContent = String(new Date().getFullYear());
      };

      const initHomeSnapshot = () => {
        if(!viewShell) return;
        const home = viewShell.querySelector('[data-home-view]');
        if(home) HOME_HTML = home.outerHTML;
      };

      const initFirstRoute = async () => {
        const r = routeFromLocation();
        setDocForRoute(r);
        if(r === '/contatti'){
          await swapView('/contatti', {});
        } else {
          initHeaderHeroSense();
        }
      };

      const init = async () => {
        initTheme();
        initLanguage();

        initHomeSnapshot();
        initActions();
        initHeaderScroll();
        initYear();

        revealIn(document);
        smartMediaIn(document);

        initHScroll();
        initHeroVideo();
        initLightbox();
        initHeaderHeroSense();
        initEvents(document);

        await initFirstRoute();
      };

      if(document.readyState === 'loading'){
        document.addEventListener('DOMContentLoaded', init, { once: true });
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
