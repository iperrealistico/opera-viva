<!doctype html>
<html lang="it" dir="ltr" data-theme="dark" data-language="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <title>Opera Viva | Progetto Fotografico Marittimo</title>
  <link rel="icon" href="favicon.jpg">
  <meta name="description" content="Opera Viva - Progetto fotografico che racconta navi, marinai e imbarcazioni attraverso tecniche antiche come il collodio umido e la fotografia infrarossa.">
  <meta name="robots" content="index,follow,max-image-preview:large">
  <meta name="color-scheme" content="dark light">
  <meta name="theme-color" content="#0b0c0f">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Crimson+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">

  <style>
    :root{ color-scheme: dark light; }
    html, body{ overflow-x:hidden; }
    body{ margin:0; font-family: 'Crimson Pro', Georgia, serif; }
    a{ color:inherit; }
  </style>

  <style>
    :root{
      --font-body: 'Crimson Pro', Georgia, serif;
      --font-display: 'Cinzel', Georgia, serif;
      --fs-0: clamp(1.00rem, 0.94rem + 0.28vw, 1.10rem);
      --fs-1: clamp(1.15rem, 1.02rem + 0.62vw, 1.38rem);
      --fs-2: clamp(1.52rem, 1.20rem + 1.35vw, 2.15rem);
      --fs-3: clamp(2.10rem, 1.48rem + 2.45vw, 3.20rem);
      --fs-4: clamp(2.80rem, 1.85rem + 3.40vw, 4.25rem);
      --s-2: clamp(0.88rem, 0.70rem + 0.55vw, 1.18rem);
      --s-3: clamp(1.20rem, 0.95rem + 0.85vw, 1.70rem);
      --s-4: clamp(1.58rem, 1.15rem + 1.30vw, 2.25rem);
      --s-5: clamp(2.20rem, 1.45rem + 2.15vw, 3.30rem);
      --s-6: clamp(3.10rem, 2.00rem + 3.20vw, 5.10rem);
      --wrap: min(1120px, calc(100% - 2*clamp(1rem, 4vw, 2.2rem)));
      --accent: rgba(180,150,120,.92);
      --ease-out: cubic-bezier(.16,1,.3,1);
      --dur-2: 320ms;
      --dur-3: 720ms;
    }
    :root[data-theme="dark"]{
      --bg: #0f1419;
      --bg-2: #0a0e12;
      --bg-3: #13181f;
      --surface: rgba(255,255,255,.035);
      --surface-2: rgba(255,255,255,.055);
      --border: rgba(255,255,255,.10);
      --border-2: rgba(255,255,255,.16);
      --text: rgba(245,245,245,.93);
      --muted: rgba(216,216,216,.70);
      --muted-2: rgba(216,216,216,.54);
      --shadow: rgba(0,0,0,.60);
      --ph-1: rgba(255,255,255,.045);
      --ph-2: rgba(255,255,255,.095);
      --ok: #42d17a;
    }
    :root[data-theme="light"]{
      --bg: #faf9f7;
      --bg-2: #f2f1ee;
      --bg-3: #e8e6e1;
      --surface: rgba(0,0,0,.03);
      --surface-2: rgba(0,0,0,.055);
      --border: rgba(0,0,0,.10);
      --border-2: rgba(0,0,0,.16);
      --text: rgba(0,0,0,.90);
      --muted: rgba(0,0,0,.67);
      --muted-2: rgba(0,0,0,.52);
      --shadow: rgba(0,0,0,.18);
      --ph-1: rgba(0,0,0,.035);
      --ph-2: rgba(0,0,0,.085);
      --ok: #1aa957;
      --accent: rgba(60,40,20,.92);
    }
    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: var(--font-body);
      font-size: var(--fs-0);
      line-height: 1.68;
      color: var(--text);
      background: var(--bg);
    }
    :root[data-language="it"] [lang="en"]{ display:none !important; }
    :root[data-language="en"] [lang="it"]{ display:none !important; }
    .wrap{ width: var(--wrap); margin-inline:auto; }
    .h2{
      font-family: var(--font-display);
      font-size: var(--fs-3);
      line-height: 1.12;
      margin: 0 0 var(--s-2);
      font-weight: 700;
    }
    .lead{ font-size: var(--fs-1); color: var(--muted); margin: 0 0 var(--s-3); }
    .p{ margin: 0 0 var(--s-2); color: var(--muted); }
    .section{ padding: var(--s-6) 0; }
    .hero{
      position: relative;
      padding: clamp(7.5rem, 12vh, 10.5rem) 0 var(--s-6);
      overflow: hidden;
      color: rgba(255,255,255,.93);
    }
    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.40), rgba(0,0,0,.70));
      pointer-events:none;
      z-index: 2;
    }
    .heroVideo{
      position:absolute;
      inset:0;
      z-index: 1;
      background: var(--bg-2);
    }
    .hero__wrap{
      position: relative;
      z-index: 3;
    }
    .hero__title{
      font-family: var(--font-display);
      font-size: var(--fs-4);
      line-height: 1.08;
      margin: 0 0 var(--s-2);
      font-weight: 700;
    }
    .quote{
      margin: var(--s-4) 0;
      padding: var(--s-3) var(--s-4);
      border-left: 3px solid var(--accent);
      background: color-mix(in oklab, var(--surface-2) 60%, transparent);
      font-style: italic;
      font-size: var(--fs-1);
      color: var(--muted);
    }
    .pill{
      padding: 0;
    }
    .pill__title{
      margin: 0 0 .35rem;
      font-weight: 700;
      font-size: .90em;
      display:flex;
      gap:.6rem;
    }
    .pill__title i{ color: var(--accent); }
    .pill__text{ margin: 0; color: var(--muted); }
    .eventList{
      margin-top: var(--s-4);
      display: grid;
      gap: var(--s-3);
    }
    .eventItem{
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: var(--s-3);
      background: var(--surface);
      box-shadow: 0 18px 80px var(--shadow);
    }
    .eventItem__title{
      font-family: var(--font-display);
      font-size: var(--fs-2);
      margin: 0 0 var(--s-2);
      font-weight: 700;
    }
    .eventItem__date{
      font-size: .88em;
      color: var(--accent);
      font-weight: 700;
    }
    .eventItem__location{
      display: flex;
      gap: .5rem;
      color: var(--muted-2);
      margin-bottom: var(--s-2);
    }
    .eventItem__desc{
      margin: 0;
      color: var(--muted);
    }
    .eventError{
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: var(--s-3);
      background: var(--surface);
      color: var(--muted);
      text-align: center;
    }
    .site-footer{
      padding: var(--s-4) 0 var(--s-5);
      border-top: 1px solid var(--border);
      background: var(--bg-2);
    }
    .footer__wrap{
      display:flex;
      justify-content: space-between;
      gap: var(--s-2);
      flex-wrap: wrap;
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <nav>
        <button data-action="toggle-theme">Tema</button>
        <button data-action="toggle-language">Lingua</button>
      </nav>
    </div>
  </header>

  <main id="main">
    <section class="hero" aria-label="Intro">
      <div class="heroVideo" aria-hidden="true"></div>
      <div class="wrap hero__wrap">
        <h1 class="hero__title">
          <span lang="it">Opera Viva</span>
          <span lang="en">Opera Viva</span>
        </h1>
        <p class="lead">
          <span lang="it">Raccontare navi ed equipaggi attraverso tecniche fotografiche antiche e visioni infrarosse.</span>
          <span lang="en">Telling the stories of ships and crews through ancient photographic techniques.</span>
        </p>
      </div>
    </section>

    <section id="progetto" class="section">
      <div class="wrap">
        <h2 class="h2">
          <span lang="it">Il Progetto</span>
          <span lang="en">The Project</span>
        </h2>
        <p class="lead">
          <span lang="it">Il mare è da sempre un luogo dove l'uomo si misura con sé stesso, con la bellezza e con il tempo.</span>
          <span lang="en">The sea has always been a place where man measures himself.</span>
        </p>
        <blockquote class="quote">
          <span lang="it">"Dimmi, o Musa, dell'eroe multiforme..."</span>
          <span lang="en">"Tell me, O Muse, of the man of many devices..."</span>
          <footer style="margin-top: 1rem; font-size: .90em;">— Omero, Odissea</footer>
        </blockquote>
        <p class="p">
          <span lang="it">Con questo progetto vogliamo riportare quella stessa aura nel presente, raccontando navi ed equipaggi come protagonisti di una nuova epopea.</span>
          <span lang="en">With this project we want to bring that same aura into the present.</span>
        </p>
      </div>
    </section>

    <section id="cosa-facciamo" class="section">
      <div class="wrap">
        <h2 class="h2">
          <span lang="it">Cosa Facciamo</span>
          <span lang="en">What We Do</span>
        </h2>
        <div class="pill">
          <h3 class="pill__title">
            <i class="fa-solid fa-palette"></i>
            <span lang="it">Opere su Misura</span>
          </h3>
          <p class="pill__text">
            <span lang="it">Opere fotografiche su misura per pareti, realizzate con tecniche antiche.</span>
          </p>
        </div>
        <div class="pill" style="margin-top: 2rem;">
          <h3 class="pill__title">
            <i class="fa-solid fa-flask"></i>
            <span lang="it">Tintype</span>
          </h3>
          <p class="pill__text">
            <span lang="it">Fotografia su lastra di metallo, processo inventato nel 1851.</span>
          </p>
        </div>
        <div class="pill" style="margin-top: 2rem;">
          <h3 class="pill__title">
            <i class="fa-solid fa-gem"></i>
            <span lang="it">Ambrotype</span>
          </h3>
          <p class="pill__text">
            <span lang="it">Tecnica su vetro del 1854 che crea un'immagine positiva su lastra di vetro.</span>
          </p>
        </div>
        <div class="pill" style="margin-top: 2rem;">
          <h3 class="pill__title">
            <i class="fa-solid fa-eye"></i>
            <span lang="it">Infrarosso Digitale</span>
          </h3>
          <p class="pill__text">
            <span lang="it">Stampe fine art da fotografia infrarossa digitale che rivelano ciò che l'occhio non può vedere.</span>
          </p>
        </div>
      </div>
    </section>

    <section id="eventi" class="section">
      <div class="wrap">
        <h2 class="h2">
          <span lang="it">Mostra Itinerante</span>
          <span lang="en">Traveling Exhibition</span>
        </h2>
        <p class="p">
          <span lang="it">Opera Viva è una mostra itinerante che si sposta per l'Italia.</span>
          <span lang="en">Opera Viva is a traveling exhibition that moves around Italy.</span>
        </p>
        <div id="eventi-list">
          <div class="eventError">
            <span lang="it">Caricamento eventi...</span>
            <span lang="en">Loading events...</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap footer__wrap">
      <p>© <span data-year>2025</span> Opera Viva</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script>
    (function(){
      "use strict";
      const root = document.documentElement;
      
      const loadEventi = async () => {
        const container = document.getElementById('eventi-list');
        if (!container) return;
        
        try {
          const response = await fetch('./eventi.md');
          if (!response.ok) throw new Error('File not found');
          
          const mdText = await response.text();
          const lines = mdText.split('\n').filter(line => line.trim());
          const events = [];
          let currentEvent = null;
          
          for (const line of lines) {
            if (line.startsWith('## ')) {
              if (currentEvent) events.push(currentEvent);
              currentEvent = { 
                title: line.replace('## ', '').trim(), 
                date: '', 
                location: '', 
                description: '' 
              };
            } else if (line.startsWith('**Data:**') && currentEvent) {
              currentEvent.date = line.replace('**Data:**', '').trim();
            } else if (line.startsWith('**Luogo:**') && currentEvent) {
              currentEvent.location = line.replace('**Luogo:**', '').trim();
            } else if (currentEvent && line.trim() && !line.startsWith('#') && !line.startsWith('**')) {
              currentEvent.description += line.trim() + ' ';
            }
          }
          if (currentEvent) events.push(currentEvent);
          
          if (events.length === 0) {
            container.innerHTML = `
              <div class="eventError">
                <span lang="it">Nessun evento programmato. Aggiungi eventi nel file eventi.md</span>
                <span lang="en">No events scheduled. Add events in the eventi.md file</span>
              </div>
            `;
            return;
          }
          
          const eventsHTML = events.map(event => `
            <article class="eventItem">
              <h3 class="eventItem__title">${event.title}</h3>
              <span class="eventItem__date">${event.date}</span>
              ${event.location ? `
                <div class="eventItem__location">
                  <i class="fa-solid fa-location-dot"></i>
                  <span>${event.location}</span>
                </div>
              ` : ''}
              ${event.description ? `<p class="eventItem__desc">${event.description.trim()}</p>` : ''}
            </article>
          `).join('');
          
          container.innerHTML = `<div class="eventList">${eventsHTML}</div>`;
          
        } catch (error) {
          console.error('Error loading events:', error);
          container.innerHTML = `
            <div class="eventError">
              <span lang="it">Crea un file "eventi.md" nella stessa cartella per mostrare gli eventi</span>
              <span lang="en">Create an "eventi.md" file in the same folder to display events</span>
            </div>
          `;
        }
      };
      
      const applyLanguage = (lang) => {
        root.setAttribute('data-language', lang === 'en' ? 'en' : 'it');
        try {
          localStorage.setItem('ov_lang', lang);
        } catch(e) {}
      };
      
      const applyTheme = (theme) => {
        root.setAttribute('data-theme', theme === 'light' ? 'light' : 'dark');
        try {
          localStorage.setItem('ov_theme', theme);
        } catch(e) {}
      };
      
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-action]');
        if (!btn) return;
        
        const action = btn.getAttribute('data-action');
        
        if (action === 'toggle-language') {
          const current = root.getAttribute('data-language') || 'it';
          applyLanguage(current === 'it' ? 'en' : 'it');
        }
        
        if (action === 'toggle-theme') {
          const current = root.getAttribute('data-theme') || 'dark';
          applyTheme(current === 'dark' ? 'light' : 'dark');
        }
      });
      
      const init = () => {
        try {
          const savedLang = localStorage.getItem('ov_lang');
          const savedTheme = localStorage.getItem('ov_theme');
          if (savedLang) applyLanguage(savedLang);
          if (savedTheme) applyTheme(savedTheme);
        } catch(e) {}
        
        const yearEl = document.querySelector('[data-year]');
        if (yearEl) yearEl.textContent = String(new Date().getFullYear());
        
        loadEventi();
      };
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
